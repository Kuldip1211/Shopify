<!-- 📄 sections/cart-page.liquid -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

<section
  class="cart-page-section"
  style="font-family: 'Poppins', sans-serif; background-color: {{ section.settings.bg_color }}; padding: {{ section.settings.section_padding }}px 0;"
>
  <div class="container" style="max-width: 1200px; margin: 0 auto; padding: 0 20px;">
    
    <!-- 🏷️ Header -->
    <div class="cart-header" style="text-align: center; margin-bottom: 40px;">
      <h2 style="font-size: 2rem; font-weight: 700; color: {{ section.settings.heading_color }};">
        {{ section.settings.heading }}
      </h2>
      <p style="color: {{ section.settings.subheading_color }};">{{ section.settings.subheading }}</p>
    </div>

    <!-- 🛍️ Cart Items -->
    {% if cart.item_count > 0 %}
      <form action="/cart" method="post" novalidate>
        <table class="cart-table">
          <thead>
            <tr>
              <th>Product</th>
              <th>Price</th>
              <th>Quantity</th>
              <th>Total</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            {% for item in cart.items %}
              <tr class="cart-item">
                <td class="product-info">
                  <a href="{{ item.url }}" class="cart-img-wrapper">
                    <img src="{{ item.image | img_url: '200x' }}" alt="{{ item.title }}">
                  </a>
                  <div>
                    <a href="{{ item.url }}" class="product-title">{{ item.title }}</a>
                    {% if item.variant_title != "Default Title" %}
                      <p class="variant">{{ item.variant_title }}</p>
                    {% endif %}
                  </div>
                </td>

                <td class="price">{{ item.price | money }}</td>

                <td class="quantity">
                  <input 
                    type="number" 
                    name="updates[]" 
                    value="{{ item.quantity }}" 
                    min="1" 
                    class="quantity-input"
                  >
                </td>

                <td class="total">{{ item.line_price | money }}</td>

                <td class="remove">
                  <a href="{{ routes.cart_change_url }}?line={{ forloop.index }}&quantity=0" class="remove-btn">✖</a>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>

        <!-- 💰 Subtotal & Buttons -->
        <div class="cart-summary">
          <p class="subtotal">
            <strong>Subtotal:</strong> {{ cart.total_price | money }}
          </p>
          <div class="cart-buttons">
            <button type="submit" class="update-btn" name="update">Update Cart</button>
            <a href="{{ routes.all_products_collection_url }}" class="continue-btn">Continue Shopping</a>
            <a href="/checkout" class="checkout-btn">Proceed to Checkout</a>
          </div>
        </div>
      </form>
    {% else %}
      <div class="empty-cart" style="text-align: center; padding: 60px 20px;">
        <img src="{{ section.settings.empty_cart_image | img_url: '400x' }}" alt="Empty Cart" style="max-width: 200px; margin-bottom: 20px;">
        <h3 style="font-size: 1.5rem; color: #444;">{{ section.settings.empty_cart_heading }}</h3>
        <p style="margin-top: 10px; color: #666;">{{ section.settings.empty_cart_text }}</p>
        <a href="{{ routes.all_products_collection_url }}" class="continue-btn" style="margin-top: 20px;">Continue Shopping</a>
      </div>
    {% endif %}
  </div>
</section>

<style>
  /* 🌿 Table Styles */
  .cart-table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 40px;
  }

  .cart-table th, .cart-table td {
    padding: 15px;
    text-align: center;
    border-bottom: 1px solid #eee;
  }

  .cart-table th {
    text-transform: uppercase;
    font-size: 14px;
    letter-spacing: 0.5px;
    color: #777;
  }

  .cart-item .product-info {
    display: flex;
    align-items: center;
    gap: 15px;
  }

  .cart-img-wrapper img {
    width: 80px;
    height: 80px;
    object-fit: cover;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }

  .product-title {
    font-weight: 600;
    color: #333;
    text-decoration: none;
  }

  .product-title:hover {
    color: #27ae60;
  }

  .variant {
    font-size: 13px;
    color: #777;
  }

  .price, .total {
    color: #27ae60;
    font-weight: 600;
  }

  .quantity-input {
    width: 60px;
    text-align: center;
    border-radius: 6px;
    border: 1px solid #ddd;
    padding: 5px;
  }

  .remove-btn {
    color: #ff4d4d;
    font-size: 18px;
    text-decoration: none;
  }

  .remove-btn:hover {
    color: #e60000;
  }

  /* 💰 Cart Summary */
  .cart-summary {
    text-align: right;
  }

  .subtotal {
    font-size: 1.2rem;
    margin-bottom: 20px;
  }

  .cart-buttons {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    justify-content: flex-end;
  }

  .update-btn,
  .continue-btn,
  .checkout-btn {
    display: inline-block;
    padding: 12px 25px;
    border-radius: 8px;
    border: none;
    text-decoration: none;
    font-weight: 600;
    font-size: 14px;
    transition: all 0.3s ease;
  }

  .update-btn {
    background: #f0f0f0;
    color: #333;
  }
  .update-btn:hover {
    background: #ddd;
  }

  .continue-btn {
    background: #27ae60;
    color: white;
  }
  .continue-btn:hover {
    background: #219150;
  }

  .checkout-btn {
    background: #2ecc71;
    color: white;
  }
  .checkout-btn:hover {
    background: #27ae60;
  }

  /* 🪴 Empty Cart */
  .empty-cart h3 {
    margin-top: 15px;
  }

  /* 📱 Responsive */
  @media (max-width: 768px) {
    .cart-table thead {
      display: none;
    }

    .cart-table, .cart-item, .cart-table tbody, .cart-table tr, .cart-table td {
      display: block;
      width: 100%;
    }

    .cart-item {
      border: 1px solid #eee;
      border-radius: 10px;
      margin-bottom: 20px;
      padding: 15px;
      text-align: left;
    }

    .cart-table td {
      border: none;
      padding: 10px 0;
    }

    .cart-summary {
      text-align: center;
    }

    .cart-buttons {
      justify-content: center;
    }
  }
</style>

{% schema %}
{
  "name": "Cart Page",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading", "default": "Your Shopping Cart" },
    { "type": "text", "id": "subheading", "label": "Subheading", "default": "Review your selected items before checkout." },
    { "type": "image_picker", "id": "empty_cart_image", "label": "Empty Cart Image" },
    { "type": "text", "id": "empty_cart_heading", "label": "Empty Cart Heading", "default": "Your cart is empty!" },
    { "type": "text", "id": "empty_cart_text", "label": "Empty Cart Text", "default": "Looks like you haven’t added anything yet. Start shopping now!" },
    { "type": "color", "id": "bg_color", "label": "Background Color", "default": "#ffffff" },
    { "type": "color", "id": "heading_color", "label": "Heading Color", "default": "#222222" },
    { "type": "color", "id": "subheading_color", "label": "Subheading Color", "default": "#666666" },
    { "type": "range", "id": "section_padding", "label": "Section Padding (px)", "default": 60, "min": 20, "max": 150, "step": 5 }
  ],
  "presets": [{ "name": "Cart Page" }]
}
{% endschema %}
