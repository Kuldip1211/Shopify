<section
  id="cart_page-section"
  class="cart_page-section"
  style="font-family: 'Poppins', sans-serif; background-color: {{ section.settings.bg_color }}; padding: {{ section.settings.section_padding }}px 0;"
>
  <!-- ✅ Include external CSS file -->
  {{ 'cart-page.css' | asset_url | stylesheet_tag }} 


  <div class="cart_page-container">
    <!-- 🏷️ Header -->
    <div class="cart_page-header">
      <h2 class="cart_page-heading" style="color: {{ section.settings.heading_color }};">
        {{ section.settings.heading }}
      </h2>
      <p class="cart_page-subheading" style="color: {{ section.settings.subheading_color }};">
        {{ section.settings.subheading }}
      </p>
    </div>

    <!-- 🛍️ Cart Items -->
    {% if cart.item_count > 0 %}
      <form action="{{ routes.cart_url }}" method="post" novalidate>
        <table class="cart_page-table">
          <thead>
            <tr>
              <th>Product</th>
              <th>Price</th>
              <th>Quantity</th>
              <th>Total</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            {% for item in cart.items %}
              <tr class="cart_page-item">
                <td class="cart_page-product-info">
                  <a href="{{ item.url }}" class="cart_page-img-wrapper">
                    <img
                      src="{{ item.image | image_url: width: 200, height: 200 }}"
                      alt="{{ item.title }}"
                      width="200"
                      height="200"
                      loading="lazy"
                    >
                  </a>
                  <div>
                    <a href="{{ item.url }}" class="cart_page-product-title">{{ item.title }}</a>
                    {% if item.variant_title != 'Default Title' %}
                      <p class="cart_page-variant">{{ item.variant_title }}</p>
                    {% endif %}
                  </div>
                </td>

                <td class="cart_page-price">{{ item.price | money }}</td>

                <td class="cart_page-quantity">
                  <input
                    type="number"
                    name="updates[]"
                    value="{{ item.quantity }}"
                    min="1"
                    class="cart_page-quantity-input"
                  >
                </td>

                <td class="cart_page-total">{{ item.line_price | money }}</td>

                <td class="cart_page-remove">
                  <a
                    href="{{ routes.cart_change_url }}?line={{ forloop.index }}&quantity=0"
                    class="cart_page-remove-btn"
                    >✖</a
                  >
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>

        <!-- 💰 Subtotal & Buttons -->
        <div class="cart_page-summary">
          <p class="cart_page-subtotal"><strong>Subtotal:</strong> {{ cart.total_price | money }}</p>
          <div class="cart_page-buttons">
            <button type="submit" class="cart_page-update-btn" name="update">Update Cart</button>
            <a href="{{ routes.all_products_collection_url }}" class="cart_page-continue-btn">Continue Shopping</a>
            <a href="{{ routes.checkout_url }}" class="cart_page-checkout-btn">Proceed to Checkout</a>
          </div>
        </div>
      </form>
    {% else %}
      <div class="cart_page-empty">
        <img
          src="{{ section.settings.empty_cart_image | image_url: width: 400, height: 400 }}"
          alt="Empty Cart"
          width="400"
          height="400"
          loading="lazy"
        >
        <h3 class="cart_page-empty-heading">{{ section.settings.empty_cart_heading }}</h3>
        <p class="cart_page-empty-text">{{ section.settings.empty_cart_text }}</p>
        <a href="{{ routes.all_products_collection_url }}" class="cart_page-empty-btn">Continue Shopping</a>
      </div>
    {% endif %}
  </div>
</section>

<!-- ✅ Include external JS file -->
<script src="{{ 'cart-page.js' | asset_url }}" defer></script>


{% schema %}
{
  "name": "Cart Page",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading", "default": "Your Shopping Cart" },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "Review your selected items before checkout."
    },
    { "type": "image_picker", "id": "empty_cart_image", "label": "Empty Cart Image" },
    { "type": "text", "id": "empty_cart_heading", "label": "Empty Cart Heading", "default": "Your cart is empty!" },
    {
      "type": "text",
      "id": "empty_cart_text",
      "label": "Empty Cart Text",
      "default": "Looks like you haven’t added anything yet. Start shopping now!"
    },
    { "type": "color", "id": "bg_color", "label": "Background Color", "default": "#ffffff" },
    { "type": "color", "id": "heading_color", "label": "Heading Color", "default": "#222222" },
    { "type": "color", "id": "subheading_color", "label": "Subheading Color", "default": "#666666" },
    {
      "type": "range",
      "id": "section_padding",
      "label": "Section Padding (px)",
      "default": 60,
      "min": 20,
      "max": 150,
      "step": 5
    }
  ],
  "presets": [{ "name": "Cart Page" }]
}
{% endschema %}
