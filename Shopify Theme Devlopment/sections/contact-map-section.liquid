<!-- üìÑ sections/contact-map-section.liquid -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

<section 
  class="contact-map-section" 
  style="background-color: {{ section.settings.bg_color }}; font-family: 'Poppins', sans-serif; padding: 80px 0; overflow: hidden;"
>
  <div class="container" style="max-width: 1200px; margin: auto; display: flex; flex-wrap: wrap; gap: 40px; justify-content: space-between; align-items: stretch;">

    <!-- üó∫Ô∏è Left Side: Google Map -->
    <div class="map-container fade-in-left">
      <iframe 
        src="{{ section.settings.map_embed_url }}" 
        allowfullscreen="" 
        loading="lazy"
      ></iframe>
    </div>

    <!-- üìû Right Side: Contact Form -->
    <div class="contact-container fade-in-right">
      <h2 class="contact-heading">{{ section.settings.heading }}</h2>
      <p class="contact-subheading">{{ section.settings.subheading }}</p>

      {% form 'contact', class: 'contact-form' %}
        <div class="form-fields">
          <input type="text" name="contact[name]" placeholder="Your Name" required>
          <input type="email" name="contact[email]" placeholder="Your Email" required>
          <textarea name="contact[body]" placeholder="Your Message" rows="4" required></textarea>
          <button type="submit">{{ section.settings.button_text }}</button>
        </div>
      {% endform %}

      {% if form.posted_successfully? %}
        <p class="success-msg">{{ section.settings.success_message }}</p>
      {% elsif form.errors %}
        <p class="error-msg">{{ form.errors | default_errors }}</p>
      {% endif %}

      <div class="store-info">
        <h3>{{ section.settings.store_heading }}</h3>
        <p><strong>üìç Address:</strong> {{ section.settings.store_address }}</p>
        <p><strong>üìû Phone:</strong> {{ section.settings.store_phone }}</p>
        <p><strong>üìß Email:</strong> {{ section.settings.store_email }}</p>
      </div>
    </div>
  </div>

  <style>
    /* üó∫Ô∏è Map Styling */
    .map-container {
      flex: 1 1 48%;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 5px 25px rgba(0,0,0,0.08);
      min-height: 460px;
    }

    .map-container iframe {
      width: 100%;
      height: 100%;
      border: 0;
      display: block;
      border-radius: 16px;
    }

    /* üìû Contact Box */
    .contact-container {
      flex: 1 1 48%;
      background-color: #fff;
      padding: 40px;
      border-radius: 16px;
      box-shadow: 0 5px 25px rgba(0,0,0,0.08);
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .contact-heading {
      font-size: 2rem;
      font-weight: 700;
      color: {{ section.settings.heading_color }};
      margin-bottom: 10px;
    }

    .contact-subheading {
      color: {{ section.settings.text_color }};
      margin-bottom: 25px;
    }

    .form-fields input,
    .form-fields textarea {
      width: 100%;
      margin: 10px;
      padding: 14px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 1rem;
      outline: none;
      transition: all 0.3s ease;
    }

    .form-fields input:focus,
    .form-fields textarea:focus {
      border-color: {{ section.settings.button_bg_color }};
      box-shadow: 0 0 4px {{ section.settings.button_bg_color }};
    }

    .form-fields button {
      background-color: {{ section.settings.button_bg_color }};
      color: {{ section.settings.button_text_color }};
      border: none;
      padding: 14px 25px;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: 0.3s;
      width: 100%;
    }

    .form-fields button:hover {
      background-color: {{ section.settings.button_hover_color }};
      transform: scale(1.03);
    }

    .success-msg {
      margin-top: 15px;
      color: green;
      font-weight: 600;
    }

    .error-msg {
      margin-top: 15px;
      color: red;
    }

    /* üè¢ Store Info */
    .store-info {
      margin-top: 30px;
      color: {{ section.settings.text_color }};
    }

    .store-info h3 {
      font-size: 1.2rem;
      font-weight: 600;
      margin-bottom: 10px;
      color: {{ section.settings.heading_color }};
    }

    /* ‚ú® Animation */
    .fade-in-left, .fade-in-right {
      opacity: 0;
      transform: translateY(40px);
      animation: fadeIn 1s ease forwards;
    }

    @keyframes fadeIn {
      to { opacity: 1; transform: translateY(0); }
    }

    /* üì± Responsive */
    @media (max-width: 900px) {
      .container {
        flex-direction: column;
      }
      .map-container, .contact-container {
        flex: 1 1 100%;
      }
      .map-container {
        height: 350px;
        order: 2;
      }
      .contact-container {
        order: 1;
      }
    }
  </style>
</section>

{% schema %}
{
  "name": "Contact / Map Section",
  "settings": [
    { "type": "color", "id": "bg_color", "label": "Background Color", "default": "#f9f9f9" },
    { "type": "text", "id": "heading", "label": "Heading", "default": "Get in Touch" },
    { "type": "textarea", "id": "subheading", "label": "Subheading", "default": "We‚Äôd love to hear from you! Fill out the form below or visit us at our store location." },
    { "type": "text", "id": "button_text", "label": "Button Text", "default": "Send Message" },
    { "type": "color", "id": "button_bg_color", "label": "Button Background Color", "default": "#2E7D32" },
    { "type": "color", "id": "button_hover_color", "label": "Button Hover Color", "default": "#1B5E20" },
    { "type": "color", "id": "button_text_color", "label": "Button Text Color", "default": "#ffffff" },
    { "type": "color", "id": "heading_color", "label": "Heading Color", "default": "#111111" },
    { "type": "color", "id": "text_color", "label": "Text Color", "default": "#444444" },
    { "type": "text", "id": "success_message", "label": "Success Message", "default": "Thank you! Your message has been sent successfully." },
    { "type": "text", "id": "store_heading", "label": "Store Info Heading", "default": "Our Store Information" },
    { "type": "text", "id": "store_address", "label": "Store Address", "default": "123 Green Street, Ahmedabad, India" },
    { "type": "text", "id": "store_phone", "label": "Store Phone", "default": "+91 98765 43210" },
    { "type": "text", "id": "store_email", "label": "Store Email", "default": "support@yourstore.com" },
    { "type": "text", "id": "map_embed_url", "label": "Google Map Embed URL", "default": "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3683.8791531182813!2d72.5019!3d23.0328!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x395e84f94a4a5c2d%3A0x2a7d0e5c6a1a6142!2sAhmedabad!5e0!3m2!1sen!2sin!4v1693323297467!5m2!1sen!2sin" }
  ],
  "presets": [
    { "name": "Contact & Map Section", "category": "Contact" }
  ]
}
{% endschema %}
